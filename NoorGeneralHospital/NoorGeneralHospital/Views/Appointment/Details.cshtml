@model IEnumerable<NoorGeneralHospital.Models.Sp_Model.Appointment_GetAppointmentDetails>

@{
    ViewBag.Title = "Details";
}

<div class="row">
    <div class="col-sm-4 col-3">
        <h4 class="page-title">Appointments</h4>
    </div>
    <div class="col-sm-8 col-9 text-right m-b-20">
        <a href="#" onclick="_AddEditAppointment(0)" class="btn btn btn-primary btn-rounded float-right"><i class="fa fa-plus"></i> Add Appointment</a>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <div class="table-responsive">
            <table class="table table-striped custom-table dataTable" id="example">
                <thead>
                    <tr>
                        <th>Patient Name</th>
                        <th>Phone</th>
                        <th>Doctor Name</th>
                        <th>Department</th>
                        <th>Appointment Date</th>
                        <th>Status</th>
                        <th class="text-right">Action</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var doc in Model)
                    {
                        <tr>
                            <td>
                                @doc.PatientName
                            </td>
                            <td>@doc.PatientPhone</td>
                            <td>
                                @{ if (string.IsNullOrEmpty(doc.ImagePath))
                                    {
                                        <img width="28" height="28" class="rounded-circle m-r-5" src="~/Content/assets/img/user.jpg" alt="">@doc.Doctor
                                    }
                                    else
                                    {
                                        <img width="28" height="28" class="rounded-circle m-r-5" alt="" src="/../@doc.ImagePath"> @doc.Doctor
                                    }
                                }
                            </td>
                            <td>@doc.Speciality</td>
                            <td>@doc.AppointmentDate</td>
                            <td>
                                @{

                                    if (doc.StatusId == 1)
                                    {
                                        <span class="custom-badge status-orange">@doc.Status</span>
                                    }
                                    else if (doc.StatusId == 2)
                                    {
                                        <span class="custom-badge status-green">@doc.Status</span>
                                    }
                                    else if (doc.StatusId == 3)
                                    {
                                        <span class="custom-badge status-blue">@doc.Status</span>
                                    }
                                    else
                                    {
                                        <span class="custom-badge status-red">@doc.Status</span>
                                    }
                                }
                            </td>
                            <td class="text-right">
                                <div class="dropdown dropdown-action">
                                    <a href="#" class="action-icon dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-ellipsis-v"></i></a>
                                    <div class="dropdown-menu dropdown-menu-right">
                                        @if (doc.StatusId != 2)
                                        {
                                            <a class="dropdown-item" href="#" onclick="AcceptAppointment(@doc.Id)"><i class="fa fa-pencil m-r-5"></i> Accept</a>
                                        }
                                        @if (doc.StatusId != 1 && doc.StatusId != 3 && doc.StatusId != 4)
                                        {
                                            <a class="dropdown-item" href="#" onclick="AttendAppointment(@doc.Id)"><i class="fa fa-pencil m-r-5"></i> Attend</a>
                                        }

                                        @if (doc.StatusId != 4)
                                        {
                                            <a class="dropdown-item" href="#" data-toggle="modal" data-target="#reject_appointment" onclick="RejectAppointment(@doc.Id)"><i class="fa fa-trash-o m-r-5"></i> Reject</a>
                                        }
                                    </div>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
